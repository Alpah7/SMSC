CREATE TABLE GATEWAY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  NAME                VARCHAR(255) NOT NULL,
  ACTIVE              BOOLEAN      NOT NULL,
  SETTINGS_ID         BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_SETTINGS (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  PAYMENT             VARCHAR(255) NOT NULL,
  DEPOSIT             DOUBLE       NOT NULL,
  NOTIFICATION_ID     BIGINT       NOT NULL,
  LIMIT_ID            BIGINT       NOT NULL,
  SENDER_POLICY_ID    BIGINT       NOT NULL,
  MESSAGE_POLICY_ID   BIGINT       NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_NOTIFICATION (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  PUSH_URL            VARCHAR(255) NOT NULL,
  PUSH_TYPE           VARCHAR(255) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_LIMIT (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_LIMIT       DOUBLE       NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_SENDER_POLICY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_TYPE        VARCHAR(255) NOT NULL,
  VALUE               VARCHAR(255) NOT NULL,
  POLICY              LONGVARCHAR  NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_MESSAGE_POLICY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_TYPE        VARCHAR(255) NOT NULL,
  VALUE               VARCHAR(255) NOT NULL,
  POLICY              LONGVARCHAR  NOT NULL,
  PRIMARY KEY (ID)
);

ALTER TABLE GATEWAY
  ADD CONSTRAINT gateway_unique_name_idx UNIQUE (NAME);

ALTER TABLE GATEWAY
  ADD CONSTRAINT FK_jvsoidjfosidjre32ijrw90je
FOREIGN KEY (SETTINGS_ID)
REFERENCES GATEWAY_SETTINGS;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_jiosdoi1uiuiu3909fe9hoih4
FOREIGN KEY (NOTIFICATION_ID)
REFERENCES GATEWAY_NOTIFICATION;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_jfaioejrwoier39dfjsodprl8
FOREIGN KEY (LIMIT_ID)
REFERENCES GATEWAY_LIMIT;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_kjrqpowemffgjwoie4iuwo9gk
FOREIGN KEY (SENDER_POLICY_ID)
REFERENCES GATEWAY_SENDER_POLICY;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_jjuw93845ugsfrpwersdfmvfe
FOREIGN KEY (MESSAGE_POLICY_ID)
REFERENCES GATEWAY_MESSAGE_POLICY;