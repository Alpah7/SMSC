CREATE TABLE GATEWAY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  NAME                VARCHAR(255) NOT NULL,
  ACTIVE              BOOLEAN      NOT NULL,
  SETTINGS_ID         BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_SETTINGS (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  PAYMENT             VARCHAR(255) NOT NULL,
  DEPOSIT             DOUBLE       NOT NULL,
  NOTIFICATION_ID     BIGINT       NOT NULL,
  LIMIT_ID            BIGINT       NOT NULL,
  SENDER_POLICY_ID    BIGINT       NOT NULL,
  MESSAGE_POLICY_ID   BIGINT       NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_NOTIFICATION (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  PUSH_URL            VARCHAR(255) NOT NULL,
  PUSH_TYPE           VARCHAR(255) NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_LIMIT (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_LIMIT       DOUBLE       NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_SENDER_POLICY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_TYPE        VARCHAR(255) NOT NULL,
  VALUE               VARCHAR(255) NOT NULL,
  POLICY              LONGVARCHAR  NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE GATEWAY_MESSAGE_POLICY (
  ID                  BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ),
  LAST_MODIFIED_DATE  TIMESTAMP    NOT NULL,
  CREATED_DATE        TIMESTAMP    NOT NULL,
  CREATED_BY_ID       BIGINT,
  LAST_MODIFIED_BY_ID BIGINT,
  VERSION             BIGINT       NOT NULL,
  TYPE                VARCHAR(255) NOT NULL,
  MESSAGE_TYPE        VARCHAR(255) NOT NULL,
  VALUE               VARCHAR(255) NOT NULL,
  POLICY              LONGVARCHAR  NOT NULL,
  PRIMARY KEY (ID)
);

ALTER TABLE GATEWAY
  ADD CONSTRAINT UK_7i0u2xh8rwbx56e5om29cdobw UNIQUE (NAME);

ALTER TABLE GATEWAY
  ADD CONSTRAINT FK_b5ir8sx8fqfhvaedd8usoowpa
FOREIGN KEY (SETTINGS_ID)
REFERENCES GATEWAY_SETTINGS;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_gatlw4l9hh3yebwrvmqosxy54
FOREIGN KEY (LIMIT_ID)
REFERENCES GATEWAY_LIMIT;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_o1yta4u1qqircpa3dhu2wt5bm
FOREIGN KEY (MESSAGE_POLICY_ID)
REFERENCES GATEWAY_MESSAGE_POLICY;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_p189tqcoqbcd1x5pbxdip1oiu
FOREIGN KEY (NOTIFICATION_ID)
REFERENCES GATEWAY_NOTIFICATION;

ALTER TABLE GATEWAY_SETTINGS
  ADD CONSTRAINT FK_754fr4cnd46jpx42rrai6j8xh
FOREIGN KEY (SENDER_POLICY_ID)
REFERENCES GATEWAY_SENDER_POLICY;